<!doctype html>
<html>
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Clearing cache...</title></head>
<body style="background:#1a1a2e;color:white;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;">
<div style="text-align:center">
  <p id="status">Clearing old cache...</p>
</div>
<script>
(async function() {
  const status = document.getElementById('status');
  try {
    const regs = await navigator.serviceWorker.getRegistrations();
    for (const r of regs) {
      if (r.scope.includes('/schwubbi')) await r.unregister();
    }
    const keys = await caches.keys();
    for (const k of keys) {
      if (k.includes('schwubbi') || k.includes('workbox') || k.includes('precache')) await caches.delete(k);
    }
    status.textContent = 'Done! Redirecting...';
  } catch(e) {
    status.textContent = 'Cleared! Redirecting...';
  }
  setTimeout(function() { window.location.href = './'; }, 1500);
})();
</script>
</body>
</html>
